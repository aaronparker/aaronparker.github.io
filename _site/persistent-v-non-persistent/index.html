<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.0 -->
<title>VDI 101: Persistent vs. Non-persistent | stealthpuppy</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="VDI 101: Persistent vs. Non-persistent" />
<meta name="author" content="Aaron Parker" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A conversation about desktop virtualisation will invariably turn to the topic of persistent vs. non-persistent. Anyone new to VDI or Server Based Computing (SBC), may need persistent and non-persistent defined in context. This is a discussion that I have on a semi-regular basis, so for easy reference, I’d thought I would put down a discussion on this topic into an article." />
<meta property="og:description" content="A conversation about desktop virtualisation will invariably turn to the topic of persistent vs. non-persistent. Anyone new to VDI or Server Based Computing (SBC), may need persistent and non-persistent defined in context. This is a discussion that I have on a semi-regular basis, so for easy reference, I’d thought I would put down a discussion on this topic into an article." />
<link rel="canonical" href="/persistent-v-non-persistent/" />
<meta property="og:url" content="/persistent-v-non-persistent/" />
<meta property="og:site_name" content="stealthpuppy" />
<meta property="og:image" content="/wp-content/uploads/2015/03/5905589199_bdf215ec44_b-624x416.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-03-17T19:12:39+11:00" />
<script type="application/ld+json">
{"description":"A conversation about desktop virtualisation will invariably turn to the topic of persistent vs. non-persistent. Anyone new to VDI or Server Based Computing (SBC), may need persistent and non-persistent defined in context. This is a discussion that I have on a semi-regular basis, so for easy reference, I’d thought I would put down a discussion on this topic into an article.","author":{"@type":"Person","name":"Aaron Parker"},"@type":"BlogPosting","url":"/persistent-v-non-persistent/","image":"/wp-content/uploads/2015/03/5905589199_bdf215ec44_b-624x416.jpg","headline":"VDI 101: Persistent vs. Non-persistent","dateModified":"2015-03-17T19:12:39+11:00","datePublished":"2015-03-17T19:12:39+11:00","mainEntityOfPage":{"@type":"WebPage","@id":"/persistent-v-non-persistent/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="stealthpuppy" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">stealthpuppy</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about.html">ABOUT</a><a class="page-link" href="/smb-not-cifs.html">SMB not CIFS</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">VDI 101: Persistent vs. Non-persistent</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2015-03-17T19:12:39+11:00" itemprop="datePublished">Mar 17, 2015
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Aaron Parker</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>A conversation about desktop virtualisation will invariably turn to the topic of persistent vs. non-persistent. Anyone new to VDI or Server Based Computing (SBC), may need persistent and non-persistent defined in context. This is a discussion that I have on a semi-regular basis, so for easy reference, I’d thought I would put down a discussion on this topic into an article.</p>

<p>I’ll avoid talking about any one particular desktop virtualization solution and instead discuss this topic as it applies to all environments.</p>

<h1 id="persistency">Persistency</h1>

<p>I think it was <a href="https://twitter.com/harrylabana">Harry Labana</a> that I originally heard this statement from - “Persistency is a measure of time”. This is absolutely true - what is the time between deploying and re-deploying that desktop? How long before that PC is rebuilt because of an unrecoverable error?</p>

<p>If Windows is re-installed or the PC retired, the user must migrate to a new instance of Windows. If Windows is running on a persistent virtual machine, how long do you let that instance of Windows run before the size of the virtual hard disk becomes unmanageable? (<a href="http://www.atlantiscomputing.com/">Perhaps you need dedupe?</a>)</p>

<p>If we take persistency to mean a Windows install is immutable we live with a false sense of security. The same would apply to any general purpose OS - manage the data and configuration as though that install will fail tomorrow. If you can run all non-persistent desktops, you’re way ahead.</p>

<h1 id="defining-terms">Defining Terms</h1>

<p>Let me first list the various terms that you might hear when discussing this topic:</p>

<ul>
  <li>Persistent, stateful, full clone - a Windows instance is persistent because we want to protect that Windows install. Rebuilding it from scratch can take time and effort. A physical PC or server is persistent because there’s no abstraction of the OS from the hardware.</li>
  <li>Non-persistent, stateless, pooled, shared, linked-clone - a non-persistent virtual desktop is often destroyed at user logoff, reboot or shutdown. A Remote Desktop Services (RDS) environment can also be considered non-persistent, even though the underlying Windows instance may be persistent.</li>
</ul>

<p>So many words to describe essentially the same thing. For clarity’s sake, let’s stick with persistent and non-persistent for the rest of this article.</p>

<h1 id="who-are-we-talking-to">Who Are We Talking To?</h1>

<p>When discussing persistent and non-persistent, context is key - who’s perspective are we using - the administrator (admin, engineer, architecture etc.) or the user (end-user, IT Manager, CIO etc.)? These terms may have different meaning depending on the audience - non-persistent may sound scary to the uninitiated. Tell a user that their desktop is non-persistent and see what reaction you get.</p>

<p>An administrator on the other hand, can choose either for his (or her) toolbox when delivering virtual desktops; however non-persistent may take a rethink when compared to traditional desktop management.</p>

<p>Regardless of what type of desktop a user receives, the user requires persistency of their data - some things are non-negotiable.</p>

<p>Ultimately we need to tailor the conversation to the audience and ensure we explain these concepts succinctly.</p>

<h1 id="whats-makes-the-modern-desktop">What’s Makes the Modern Desktop?</h1>

<p>Data aside, we first need to establish whether a user requires a persistent state across sessions, before deciding on a way to manage the desktops. To do that, we should consider each of the major components of the modern Windows desktop:</p>

<ul>
  <li>Application data - where does the application store data? If it’s a web-based application or stores data in a database, then it’s unlikely data also ends up on the user’s desktop</li>
  <li>User data - ideally user data (e.g. documents) is not stored on the desktop or is at least synchronised to a remote location.</li>
  <li>User preferences - do user preferences or their profiles need to persist across sessions? If you’re delivering just applications (and not desktops), do those applications have preferences that need to be saved? Could application settings be delivered as policies instead?</li>
  <li>Applications - what is your application delivery strategy. VDI/RDS has been historically been hard to manage as a result of application requirements, making persistent desktops the easy route</li>
  <li>User applications - do you need to provide an environment that users can install applications? Do you have developers or IT Pros in-house who often need administrative rights to get their jobs done</li>
</ul>

<h1 id="virtual-desktops">Virtual Desktops</h1>

<p>A user connects to an individual virtual machine running Windows (or perhaps soon this could be Linux). Virtual desktops usually run a desktop version of Windows, but this can also be Windows Server (Server VDI).</p>

<p>A virtual desktop can be delivered from a persistent virtual machine and they will typically connect to that same virtual machine each session.</p>

<p>Virtual desktops can also be provided from a pool of virtual machines that are might be deleted or refreshed within a short amount of time. If the user connects to a pool of desktops, they could connect to any desktop in that pool (i.e. random).</p>

<h1 id="remote-desktopservices">Remote Desktop Services</h1>

<p>Users connect to a shared Windows instance running Windows Server (individually known as a Remote Desktop Session Host).</p>

<p>From the administrators point of view, Remote Desktop Session Hosts (RDSH) are managed as a persistent virtual machines (or as Windows directly on a physical host) but they could also be managed as non-persistent VMs.</p>

<p>RDSH servers provide a pool (or farm) of Windows instances that users can receive their desktops or applications from - a user could connect to any server in the pool. As such, they represent a non-persistent desktop, regardless of whether the underlying RDSH server is persistent or non-persistent.</p>

<h1 id="considerations">Considerations</h1>

<p>With a persistent desktop, each time the user connects to that desktop, their applications, data and user profile / preferences will be intact. No other management is required (that doesn’t mean that management should be ignored though) and no change to process from physical desktop management is needed (other than the introduction of a hypervisor).</p>

<p>On the other hand though, if you can ensure that even with non-persistent desktops, each time the user connects, their applications are installed, their data is abstracted from the desktop (using folder redirection or file sync solutions) and their profile (and application preferences) is available at logon, the illusion of a persistent environment will be presented.</p>

<p>Delivering a persistent user environment on top of non-persistent desktops will take some effort can may require 3rd party tools to achieve the goal of running 100% non-persistent desktops.</p>

<p>Here’s a short breakdown of the various differences between and considerations of persistent and non-persistent desktops:</p>

<p>[table id=35 /]</p>

<p>Understanding the types of desktops available to you is only the first step in determining how your VDI environment will be delivered.</p>

  </div><a class="u-url" href="/persistent-v-non-persistent/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">stealthpuppy</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">stealthpuppy</li><li><a class="u-email" href="mailto:aaron@stealthpuppy.com">aaron@stealthpuppy.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/aaronparker"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">aaronparker</span></a></li><li><a href="https://www.twitter.com/stealthpuppy"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">stealthpuppy</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>on end user computing and enterprise mobility</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
