<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.0 -->
<title>Deploy Citrix Receiver to Windows 10 with Intune and PowerShell | stealthpuppy</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Deploy Citrix Receiver to Windows 10 with Intune and PowerShell" />
<meta name="author" content="Aaron Parker" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="If you’ve deployed Windows 10 Modern Management you’ll know that some applications present a challenge for deployment, because Windows 10 MDM supports the Win32 applications via a single MSI file only. Applications such as Citrix Receiver, that are a single EXE (that wraps multiple MSI files), can, therefore, be challenging. You can create a custom wrapper to deploy Receiver, but this requires a packaging tool and some specific knowledge on how to package applications." />
<meta property="og:description" content="If you’ve deployed Windows 10 Modern Management you’ll know that some applications present a challenge for deployment, because Windows 10 MDM supports the Win32 applications via a single MSI file only. Applications such as Citrix Receiver, that are a single EXE (that wraps multiple MSI files), can, therefore, be challenging. You can create a custom wrapper to deploy Receiver, but this requires a packaging tool and some specific knowledge on how to package applications." />
<link rel="canonical" href="/deploy-citrix-receiver-intune/" />
<meta property="og:url" content="/deploy-citrix-receiver-intune/" />
<meta property="og:site_name" content="stealthpuppy" />
<meta property="og:image" content="/wp-content/uploads/2017/12/christian-fregnan-408973.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-12-23T13:47:22+11:00" />
<script type="application/ld+json">
{"description":"If you’ve deployed Windows 10 Modern Management you’ll know that some applications present a challenge for deployment, because Windows 10 MDM supports the Win32 applications via a single MSI file only. Applications such as Citrix Receiver, that are a single EXE (that wraps multiple MSI files), can, therefore, be challenging. You can create a custom wrapper to deploy Receiver, but this requires a packaging tool and some specific knowledge on how to package applications.","author":{"@type":"Person","name":"Aaron Parker"},"@type":"BlogPosting","url":"/deploy-citrix-receiver-intune/","image":"/wp-content/uploads/2017/12/christian-fregnan-408973.jpg","headline":"Deploy Citrix Receiver to Windows 10 with Intune and PowerShell","dateModified":"2017-12-23T13:47:22+11:00","datePublished":"2017-12-23T13:47:22+11:00","mainEntityOfPage":{"@type":"WebPage","@id":"/deploy-citrix-receiver-intune/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="stealthpuppy" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">stealthpuppy</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about.html">About</a><a class="page-link" href="/smb-not-cifs.html">SMB not CIFS</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Deploy Citrix Receiver to Windows 10 with Intune and PowerShell</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2017-12-23T13:47:22+11:00" itemprop="datePublished">Dec 23, 2017
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Aaron Parker</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>If you’ve deployed Windows 10 Modern Management you’ll know that some applications present a challenge for deployment, because Windows 10 MDM supports the Win32 applications via a single MSI file only. Applications such as Citrix Receiver, that are a single EXE (that wraps multiple MSI files), can, therefore, be challenging. You can <a href="https://configmgrblog.com/2017/08/29/how-to-deploy-the-citrix-receiver-for-windows-10-via-microsoft-intune/">create a custom wrapper to deploy Receiver</a>, but this requires a packaging tool and some specific knowledge on how to package applications.</p>

<p>Microsoft Intune now <a href="https://docs.microsoft.com/en-us/intune/intune-management-extension">supports deploying PowerShell scripts</a> to Windows 10 machines, which can provide a more flexible framework for deploying complex applications. For Citrix Reciever, we can use this approach to target Windows 10 PCs for downloading the latest version of Receiver directly from Citrix and <a href="https://docs.citrix.com/en-us/receiver/windows/current-release/install/cfg-command-line.html">install it with any required command line options</a>. This ensures that devices always install the latest version and the Intune administrator only ever has to create a single deployment option via a PowerShell script.</p>

<h1 id="citrix-receiver-for-windows-vs-citrix-receiver-for-windows-store">Citrix Receiver for Windows vs. Citrix Receiver for Windows (Store)</h1>

<p>In December 2017, Citrix made available an updated Receiver via the Windows Store that is not a true Universal Windows Platform app, instead, it’s the Win32 Receiver converted to a Store app via the <a href="https://docs.microsoft.com/en-us/windows/uwp/porting/desktop-to-uwp-root">Desktop Bridge</a>. Deploying this version via Microsoft Intune only requires that you subscribe to the app via the <a href="https://businessstore.microsoft.com/">Microsoft Store for Business</a>, sync with Intune and then target that version for deployment via Intune.</p>

<p>The Citrix Receiver for Windows Store version does have <a href="https://docs.citrix.com/en-us/receiver/windows-store/current-release/known-issues.html">a number of limitations or unsupported features</a>, primarily due to restrictions on apps deployed from the Store. These are:</p>

<p><strong>Unsupported features</strong></p>

<ol>
  <li>The following features of Citrix Receiver for Windows are not currently supported in Citrix Receiver for Windows (Store):</li>
  <li>Offline apps (virtualized)</li>
  <li>File type association</li>
  <li>URL redirection</li>
  <li>Jabber VXME optimization pack</li>
  <li>Generic USB redirection</li>
  <li>Proximity/Contactless card (Fast Connect)</li>
  <li>Pass-through authentication</li>
</ol>

<p><strong>Limitations</strong></p>

<ul>
  <li>The App Commands and Charms options present in the desktop viewer are not available for Citrix Receiver for Windows (Store) edition. For more information, see Knowledge Center article CTX224641.</li>
  <li>Citrix Receiver for Windows (Store) does not support the SDK functionality. This includes the Virtual Channel SDK, ICA Client Object SDK, and Fast Connect API.</li>
  <li>You require additional configuration to use the TWAIN virtual scanner with Citrix Receiver for Windows (Store). For more information, see Knowledge Center article CTX230095.</li>
  <li>On a Windows 10 S device, you cannot collect the CDF trace using the CDFControl tool.</li>
  <li>URL redirection and its dependent functionalities like Local App Access and Client-hosted apps are not supported.</li>
</ul>

<p>If you can work without the features above, then use the Store version instead of deploying Receiver via a script, as it allows you to make the application available for end-user initiated installs and simpler application management. If you do need these features, then continue onto deploying Receiver via PowerShell.</p>

<h1 id="installing-citrix-receiver">Installing Citrix Receiver</h1>

<p>Here’s a simple script to detect whether Receiver is installed and if not, download and install Receiver using a specific set of command line options.</p>

<p>The script could be extended with some additional error checking and logging to provide some additional auditing of the installation, but I have tested this successfully.</p>

<p><span style="color: #ff0000;"><strong>[Update Jan 3, 2018]</strong></span> An improved version of this script can be found in a GitHub repository here: <a href="https://github.com/aaronparker/intune/blob/master/Apps/Install-CitrixReceiver.ps1">https://github.com/aaronparker/intune/blob/master/Apps/Install-CitrixReceiver.ps1</a></p>

<h1 id="deploying-via-intune">Deploying via Intune</h1>

<p>Deploying the script via Intune is done just like any other PowerShell script. Save the script locally and then in the Azure Portal, Intune blade, under Device Configuration / PowerShell scripts, add a new script and upload the saved script.</p>

<figure id="attachment_5885" aria-describedby="caption-attachment-5885" style="width: 1440px" class="wp-caption aligncenter">[<img class="size-full wp-image-5885" src="https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Adding.png" alt="Adding the Install-CitrixReceiver.ps1 script to Intune" width="1440" height="826" srcset="https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Adding.png 1440w, https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Adding-150x86.png 150w, https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Adding-300x172.png 300w, https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Adding-768x441.png 768w, https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Adding-1024x587.png 1024w" sizes="(max-width: 1440px) 100vw, 1440px" />](https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Adding.png)<figcaption id="caption-attachment-5885" class="wp-caption-text">Adding the Install-CitrixReceiver.ps1 script to Intune*

Assign the script to an Azure AD group for target users or devices. Your script should then be listed as an assigned script. 

<figure id="attachment_5886" aria-describedby="caption-attachment-5886" style="width: 1440px" class="wp-caption aligncenter">[<img class="size-full wp-image-5886" src="https://stealthpuppy.com/wp-content/uploads/2017/12/All-Scripts.png" alt="Install-CitrixReceiver.ps1 along side other PowerShell scripts" width="1440" height="826" srcset="https://stealthpuppy.com/wp-content/uploads/2017/12/All-Scripts.png 1440w, https://stealthpuppy.com/wp-content/uploads/2017/12/All-Scripts-150x86.png 150w, https://stealthpuppy.com/wp-content/uploads/2017/12/All-Scripts-300x172.png 300w, https://stealthpuppy.com/wp-content/uploads/2017/12/All-Scripts-768x441.png 768w, https://stealthpuppy.com/wp-content/uploads/2017/12/All-Scripts-1024x587.png 1024w" sizes="(max-width: 1440px) 100vw, 1440px" />](https://stealthpuppy.com/wp-content/uploads/2017/12/All-Scripts.png)<figcaption id="caption-attachment-5886" class="wp-caption-text">Install-CitrixReceiver.ps1 alongside other PowerShell scripts*

Once deployed, we can track successful installations in the Overview blade. Note that the script will only run once per target device - it should be unlikely that the device will receive the script and have it fail (e.g. fail to download the CitrixReceiver.exe), but there could be edge cases where installation fails as a result of some very specific circumstances.

<figure id="attachment_5887" aria-describedby="caption-attachment-5887" style="width: 1440px" class="wp-caption aligncenter">[<img class="size-full wp-image-5887" src="https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Overview.png" alt="Citrix Receiver deployment overview" width="1440" height="826" srcset="https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Overview.png 1440w, https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Overview-150x86.png 150w, https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Overview-300x172.png 300w, https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Overview-768x441.png 768w, https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Overview-1024x587.png 1024w" sizes="(max-width: 1440px) 100vw, 1440px" />](https://stealthpuppy.com/wp-content/uploads/2017/12/Script-Overview.png)<figcaption id="caption-attachment-5887" class="wp-caption-text">Citrix Receiver deployment overview*

Post-deployment, we can rely on [the updater functionality built into the latest Receiver releases](https://docs.citrix.com/en-us/receiver/windows/current-release/configure/receiver-update.html) to keep end-points up to date.

# Summary

We used a simple approach to the deployment of a non-MSI application to Windows 10 via Intune with a PowerShell script. A simple example that enables deployment of Citrix Receiver with no special packaging and we can be sure that because the end-point downloads Reciever directly from Citrix, the latest version will be deployed each time.
</figcaption></figure></figcaption></figure></figcaption></figure>

  </div><a class="u-url" href="/deploy-citrix-receiver-intune/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">stealthpuppy</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">stealthpuppy</li><li><a class="u-email" href="mailto:aaron@stealthpuppy.com">aaron@stealthpuppy.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/aaronparker"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">aaronparker</span></a></li><li><a href="https://www.twitter.com/stealthpuppy"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">stealthpuppy</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>on end user computing and enterprise mobility
</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
