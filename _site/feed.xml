<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2019-04-11T20:40:55+10:00</updated><id>/feed.xml</id><title type="html">stealthpuppy</title><subtitle>on end user computing and enterprise mobility</subtitle><entry><title type="html"></title><link href="/2019/04/11/2015-08-02-folder-redirection-2015-part-1.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-08-02-folder-redirection-2015-part-1</id><content type="html" xml:base="/2019/04/11/2015-08-02-folder-redirection-2015-part-1.html">&lt;p&gt;This is a multi-part article detailing our testing results and presentations for the 2015 series on Folder Redirection:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;I’ve Got 99 Problems and Folder Redirection is Every One of Them. 2015 Testing Results. Part 1. (this article)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/folder-redirection-2015-part-2/&quot;&gt;I’ve Got 99 Problems and Folder Redirection is Every One of Them. 2015 Testing Results. Part 2&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/folder-redirection-2015-part-3/&quot;&gt;I’ve Got 99 Problems and Folder Redirection is Every One of Them. 2015 Testing Results. Part 3&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Last year, &lt;a href=&quot;http://twitter.com/helgeklein&quot;&gt;Helge Klein&lt;/a&gt;, &lt;a href=&quot;http://twitter.com/shawnbass&quot;&gt;Shawn Bass&lt;/a&gt; and myself presented the results of around of testing on Folder Redirection at events such as Citrix Synergy and BriForum and via &lt;a href=&quot;https://helgeklein.com/blog/2014/10/folder-redirection-impacts-ux-breaks-applications/&quot;&gt;a series of blog posts&lt;/a&gt;. This year, we again delved into various testing scenarios, presented to well attended sessions and this blog post summarises our 2015 results.&lt;/p&gt;

&lt;h2 id=&quot;why-folder-redirection&quot;&gt;Why Folder Redirection?&lt;/h2&gt;

&lt;p&gt;Why does Folder Redirection continue to a topic of discussion? With the release of Windows 10, Folder Redirection will continue to remain a component of the enterprise desktop, as the basic architecture in Windows that requires it, has not changed. A Windows profile still contains user folders such as Documents, Desktop, etc. that need to be protected. Additionally the basic structure of the profile has not changed.&lt;/p&gt;

&lt;p&gt;From our perspective, we’re interested in providing our audience with an overview of the pitfalls and challenges involved in implementing folder redirection, providing tips and tricks for managing folder redirection performance effectively and putting forward some potential alternatives.&lt;/p&gt;

&lt;p&gt;Just as we continue to discuss printing in VDI and SBC environments because users still print, so to shall the discussion around folder redirection continue.&lt;/p&gt;

&lt;p&gt;Folder redirection remains a popular method of user data and profile management because it can improve the user experience by achieving two things:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Faster logons - redirecting AppData out of the profile reduces the amount of data required to be copied locally at user logon&lt;/li&gt;
  &lt;li&gt;Abstracting user data - moving user data out of the profile to a home folder ensures data is available on any desktop and allows IT to protect that data&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;However, by implementing folder redirection, we’ve moved data that applications constantly interact with from the local machine to a shared resource. This means that good user experience now requires your storage back-end and network to be responsive and highly available.&lt;/p&gt;

&lt;p&gt;Those shared resources (network, storage, hypervisor, CPU etc.) contend for resources, especially in today’s data centre with traditional shared storage and with most applications and file services on a virtualized platform. This is what has driven us to to do this testing and present the results to the community - many organisations don’t consider the ramifications of implementing folder redirection. Performance on day 1 may be good, but as an environment grows organically and resources become further contended, user experience suffers.&lt;/p&gt;

&lt;h2 id=&quot;2015-testing-focus&quot;&gt;2015 Testing Focus&lt;/h2&gt;

&lt;p&gt;This year, we focussed our testing on several areas:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Comparing SMB 2.1 with SMB 3.02 - last year we tested primarily with Windows 7 as the client. In this round we’ve used Windows 8.1 as the client to see whether SMB 3.02 provides any improvements over SMB 2.1&lt;/li&gt;
  &lt;li&gt;IO performance - does SMB 3.02 improve raw IO performance and throughput over SMB 2.1?&lt;/li&gt;
  &lt;li&gt;Workload simulations - we’ve used the File Server Capacity Toolkit to model how users work with home folders to demonstrate the performance profiles of various scenarios and show you how you can do performance modelling for your file servers&lt;/li&gt;
  &lt;li&gt;Folder redirection alternatives - newer file sync and share solutions that have been popular of the past several years may make interesting alternatives to folder redirection. I’ve &lt;a href=&quot;/folder-redirection-offline-files-appsense-datanow-35/&quot;&gt;written about one of these previously&lt;/a&gt; and we have covered several more alternatives. I’ll cover some additional alternatives in seperate articles.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;All of our testing this year was performed with Windows 8.1 or Windows Server 2012 R2 on the client end, with Windows Server 2008 R2 or Windows Server 2012 R2 on the server end.&lt;/p&gt;

&lt;p&gt;Utilising a specific version of SMB requires that both the client and server are capable of speaking that particular version of the protocol. If you want to read a thorough explanation of SMB versions and how they are negotiated, this article is recommended reading - &lt;a href=&quot;/folder-redirection-offline-files-appsense-datanow-35/&quot;&gt;Windows Server 2012 R2: Which version of the SMB protocol (SMB 1.0, SMB 2.0, SMB 2.1, SMB 3.0 or SMB 3.02) are you using?&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I’ve already covered the tools that we’ve used in our testing in this blog post - &lt;a href=&quot;/replicate-2015-folder-redirection-test/&quot;&gt;Replicating Our 2015 Folder Redirection Performance Tests In Your Own Lab&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In my own lab, all of the testing was done on the following hardware and software:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Core i5, 1 x SSD, Hyper-V 2012 R2&lt;/li&gt;
  &lt;li&gt;Core i7, 3 x SSD, Hyper-V 2012 R2&lt;/li&gt;
  &lt;li&gt;1 GbE physical network&lt;/li&gt;
  &lt;li&gt;All compute and storage resources were uncontested (i.e. no other workloads were running)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;smb-21-vs-smb-302-io-and-throughput-performance&quot;&gt;SMB 2.1 vs. SMB 3.02 IO and Throughput Performance&lt;/h2&gt;

&lt;p&gt;To determine any difference in throughput performance between SMB 2.1 and SMB 3.02, we’ve used the &lt;a href=&quot;http://blogs.technet.com/b/josebda/archive/2014/10/13/diskspd-powershell-and-storage-performance-measuring-iops-throughput-and-latency-for-both-local-disks-and-smb-file-shares.aspx&quot;&gt;DiskSpd&lt;/a&gt; tool from Microsoft. With this tool, I performed tests from the client at various block sizes using a 256MB file hosted on an SMB share on the server. This was repeated for servers running Windows Server 2008 R2 and Windows Server 2012 R2.&lt;/p&gt;

&lt;p&gt;In essence, we there are no performance differences between the two SMB versions:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/08/NetworkThroughput.png&quot; alt=&quot;No Difference in Network Throughput between SMB 2.1 and SMB 3.02&quot; /&gt;&lt;em&gt;No difference in network throughput between SMB 2.1 and SMB 3.02&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;In the above test, the underlying hypervisor host was set to high performance mode, so I re-ran the same tests with the host set to balanced performance. This had an interesting result:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/08/4K8Kblocks-powerprofile.png&quot; alt=&quot;Power profile of the hypervisor host impacts 4K/8K block performance&quot; /&gt;&lt;em&gt;Power profile of the hypervisor host impacts 4K/8K block performance&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The throughput performance at 4K and 8K block sizes dropped off when compared to high performance mode. This makes sense when you consider that transferring a file at smaller block sizes requires more transactions between the client and server, so the server must process more. With less CPU resources available, performance suffers.&lt;/p&gt;

&lt;p&gt;Interestingly, it appears that SMB 2.1 read performance may suffer in the configuration more than SMB 3.02. Keep this in mind when we show results of some workloads tests and result with SMB 3.02, in part 2.&lt;/p&gt;

&lt;p&gt;Nimble Storage has &lt;a href=&quot;http://www.nimblestorage.com/blog/technology/storage-performance-benchmarks-are-useful-if-you-read-them-carefully/&quot;&gt;a great blog post that shows that across various workloads, the majority of block sizes are below 16K in size&lt;/a&gt;. If this is the case for user home drives and user profiles, then there should be a performance gain by setting the hypervisor host (or even the physical file server host) to high-performance mode.&lt;/p&gt;

&lt;p&gt;Another tool was used (&lt;a href=&quot;http://sourceforge.net/projects/io-performance/&quot;&gt;i/o performance tool&lt;/a&gt;) to measure file copies from server to client. This showed very little overall performance difference between the two protocols but for whatever reason those file copies with SMB 3.02 on average were slightly longer than SMB 2.01.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/08/IOperformance2.png&quot; alt=&quot;Choppier performance with SMB 3.02&quot; /&gt;&lt;em&gt;Choppier performance with SMB 3.02&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Any difference between the two protocols wasn’t shown in our user logon tests - a practical measure of any performance difference.&lt;/p&gt;

&lt;h2 id=&quot;smb-21-vs-302logon-times&quot;&gt;SMB 2.1 vs. 3.02 Logon Times&lt;/h2&gt;

&lt;p&gt;To test logon times, we configured what we consider to be an enormous user profile and test environment with the following details:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;User profile - the same profile was used across client and server tests:
    &lt;ul&gt;
      &lt;li&gt;151 Mb&lt;/li&gt;
      &lt;li&gt;18,460 file&lt;/li&gt;
      &lt;li&gt;2,206 folders (while the profile file size is not huge, the number of files has a significant impact on logon times)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;No folder redirection&lt;/li&gt;
  &lt;li&gt;Idle CPU on the file server/s&lt;/li&gt;
  &lt;li&gt;No locally cached copy of the profile at each logon&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The logon process was repeated across both Windows Server 2008 R2 and Windows Server 2012 R2 as the client and server, to test with hosts only capable of SMB 2.1 and clients and servers capable of both SMB 2.1 and SMB 3.02.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/08/LogonTimes.png&quot; alt=&quot;No difference in logon times.&quot; /&gt;&lt;em&gt;No difference in logon times.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;In short, there are no differences in logon times between the two protocol versions.&lt;/p&gt;

&lt;h2 id=&quot;part-2&quot;&gt;Part 2&lt;/h2&gt;

&lt;p&gt;In part 2, I’ll cover &lt;a href=&quot;/folder-redirection-2015-part-2&quot;&gt;the results of the File Server Capacity Tool tests&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-06-30-appv5-faq-download-appv5.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-06-30-appv5-faq-download-appv5</id><content type="html" xml:base="/2019/04/11/2015-06-30-appv5-faq-download-appv5.html">&lt;p&gt;Microsoft Application Virtualization (App-V) can be downloaded in a number of locations; however you will first require access to these locations which are typically via a paid subscription or because you have paid for licenses.&lt;/p&gt;

&lt;p&gt;App-V is available via the following downloads, usually as ISOs:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Microsoft Desktop Optimization Pack (MDOP)&lt;/li&gt;
  &lt;li&gt;Application Virtualization for Remote Desktop Services&lt;/li&gt;
  &lt;li&gt;Application Virtualization Hosting for Desktops&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Each of the downloads includes the App-V client (either for desktops or RDS hosts), the App-V Sequencer and the App-V Server. Additional downloads available include service packs.&lt;/p&gt;

&lt;h1 id=&quot;microsoft-volume-license&quot;&gt;Microsoft Volume License&lt;/h1&gt;

&lt;p&gt;If you have purchased the Microsoft Desktop Optimization Pack or Remote Desktop Services Client Access Licenses (CALs), the downloads will be available to you on the &lt;a href=&quot;https://licensing.microsoft.com&quot;&gt;Microsoft Volume License&lt;/a&gt; site. Search for “Microsoft Desktop Optimisation Pack” or select ’Software Insurance’ under All Products to filter for all Software Assurance downloads.&lt;/p&gt;

&lt;h1 id=&quot;microsoft-developer-network-msdn&quot;&gt;Microsoft Developer Network (MSDN)&lt;/h1&gt;

&lt;p&gt;If you have an &lt;a href=&quot;http://msdn.microsoft.com&quot;&gt;MSDN&lt;/a&gt; subscription, App-V is available via individual downloads for desktops and Remote Desktop Services and in the MDOP ISO. Links to the MSDN downloads are here (sign-in required):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/subscriptions/downloads/#searchTerm=application%20virtualization%20hosting%20for%20desktops&amp;amp;ProductFamilyId=0&amp;amp;Languages=en&amp;amp;PageSize=10&amp;amp;PageIndex=0&amp;amp;FileId=0&quot;&gt;Microsoft Application Virtualization&lt;/a&gt; downloads&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/subscriptions/downloads/#searchTerm=Microsoft%20Desktop%20Optimization%20Pack&amp;amp;ProductFamilyId=0&amp;amp;Languages=en&amp;amp;PageSize=10&amp;amp;PageIndex=0&amp;amp;FileId=0&quot;&gt;Microsoft Desktop Optimisation Pack&lt;/a&gt; downloads&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;additional-downloads&quot;&gt;Additional Downloads&lt;/h1&gt;

&lt;p&gt;Additional downloads for App-V are available here: &lt;a href=&quot;http://go.microsoft.com/fwlink/p/?LinkId=393941&quot;&gt;Microsoft Desktop Optimization Pack Group Policy Administrative Templates&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;evaluating-app-v&quot;&gt;Evaluating App-V&lt;/h1&gt;

&lt;p&gt;No evaluation version of App-V or MDOP appears to exist; however the following evaluation lab is available on TechNet: &lt;a href=&quot;http://www.microsoftvirtualacademy.com/training-courses/mdop-application-virtualization-deep-dive&quot;&gt;MDOP Application Virtualization Deep Dive&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;previously&quot;&gt;Previously&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/virtualisation/app-v-faq-4-where-can-i-download-app-v&quot;&gt;App-V 4.x FAQ: Where can I download App-V?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-06-15-appv5-faq-license-appv5.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-06-15-appv5-faq-license-appv5</id><content type="html" xml:base="/2019/04/11/2015-06-15-appv5-faq-license-appv5.html">&lt;p&gt;&lt;em&gt;This article is part of the &lt;a href=&quot;/appv5-faqs/&quot;&gt;Microsoft Application Virtualization 5 FAQ series&lt;/a&gt;. Last update: September 1st, 2015&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Microsoft Application Virtualization (App-V) 5 has three main components - Client, Server and Sequencer. For licensing purposes, you only need a license for App-V for wherever the App-V Client is installed. The App-V Server and Sequencer are not directly licensed, although you may require a Windows license to run those components.&lt;/p&gt;

&lt;p&gt;App-V 5 is licensed in one of 2 ways:&lt;/p&gt;

&lt;h1 id=&quot;physical-or-virtual-desktops&quot;&gt;Physical or Virtual Desktops&lt;/h1&gt;

&lt;p&gt;App-V is licensed as a component of the &lt;a href=&quot;https://www.microsoft.com/en-AU/windows/enterprise/products-and-technologies/mdop/default.aspx&quot;&gt;Microsoft Desktop Optimisation Pack&lt;/a&gt; (MDOP). Since the release of MDOP 2015 and Windows 10, MDOP is now a benefit of Windows Software Assurance or the &lt;a href=&quot;http://www.microsoft.com/en-us/Licensing/product-licensing/windows10.aspx&quot;&gt;Windows VDA&lt;/a&gt;. To license MDOP, your environment must first be covered with Windows Software Assurance. The &lt;a href=&quot;https://www.microsoft.com/en-us/download/details.aspx?id=1732&quot;&gt;Microsoft Software Assurance Interactive Benefits Chart&lt;/a&gt; shows how MDOP is licensed:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;If the underlying Windows Software Assurance or Windows VDA is licensed per device, then MDOP covers the licensed device. If the underlying Windows Software Assurance or Windows VDA is licensed per user, then MDOP extends across all of the licensed user’s devices.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;/media/2015/06/SoftwareAssurance.png&quot;&gt;&amp;lt;img class=”alignnone size-full wp-image-4071” src=”.com/media/2015/06/SoftwareAssurance.png” alt=”SoftwareAssurance&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;remote-desktop-services&quot;&gt;Remote Desktop Services&lt;/h1&gt;

&lt;p&gt;Remote Desktop Service (RDS) in Windows Server (including environments that use Citrix XenApp, VMware Horizon View, Dell vWorkspace or similar solutions that build on RDS), App-V is a use right of the RDS Client Access License (CAL). This means that when you purchase RDS CALs (either per-user or per-device), applications can be delivered to those devices or users via App-V. The license only covers installing the App-V client on the RDS hosts and delivering applications remotely.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://www.microsoft.com/en-us/licensing/product-licensing/products.aspx&quot;&gt;Product Use Rights&lt;/a&gt; document, updated quarterly, provide details on this method of licensing App-V.&lt;/p&gt;

&lt;h1 id=&quot;understanding-licensing&quot;&gt;Understanding Licensing&lt;/h1&gt;

&lt;p&gt;Because App-V cannot be licensed on its own, understanding App-V licensing for your organisation will be part of a larger discussion on Microsoft licensing. While we understand the information above to be correct, we strongly recommend that you engage with a partner that understands Microsoft Volume Licensing. Microsoft has a list of VL partners here that can assist: &lt;a href=&quot;https://pinpoint.microsoft.com/en-us/search?type=companies&amp;amp;competency=100010&quot; target=&quot;_blank&quot;&gt;https://pinpoint.microsoft.com/en-us/search?type=companies&amp;amp;competency=100010&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;additional-resources&quot;&gt;Additional Resources&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.microsoft.com/en-us/licensing/licensing-programs/software-assurance-default.aspx&quot;&gt;Microsoft Volume Licensing&lt;/a&gt; site&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://download.microsoft.com/download/5/c/7/5c727885-ec15-4920-818b-4d140ec6c38a/Software-Assurance-at-a-Glance.pdf&quot;&gt;Software Assurance at a glance&lt;/a&gt; (PDF)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.microsoft.com/en-us/download/details.aspx?id=1732&quot;&gt;Microsoft Software Assurance Interactive Benefits Chart&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.microsoft.com/en-us/licensing/product-licensing/products.aspx&quot;&gt;Volume Licensing Product Use Rights (PUR)&lt;/a&gt; document&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;previously&quot;&gt;Previously&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/deployment/app-v-faq-3-how-is-app-v-licensed&quot;&gt;App-V 4.x FAQ: How is App-V licensed?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-06-09-appv5-faq-what-is-appv5.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-06-09-appv5-faq-what-is-appv5</id><content type="html" xml:base="/2019/04/11/2015-06-09-appv5-faq-what-is-appv5.html">&lt;p&gt;&lt;em&gt;This article is part of the &lt;a href=&quot;/appv5-faqs/&quot;&gt;Microsoft Application Virtualization 5 FAQ series&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Microsoft Application Virtualization (App-V) is an application delivery solution that enables applications to be delivered to and executed on a Windows instance without being installed.&lt;/p&gt;

&lt;p&gt;App-V doesn’t change where an application is executed - applications still run in the same location. A Windows instance can be on a local physical device, a virtual desktop in running in the data centre, or a &lt;a href=&quot;https://technet.microsoft.com/en-us/library/hh831447.aspx&quot;&gt;Remote Desktop Session Host&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Application Virtualization provides a number of benefits:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Reduces the amount of time it takes to deliver applications to users - in many cases application delivery times are reduced to minutes. Removing the need to install an application simplifies delivery by reducing conflicts and avoiding reboots.&lt;/li&gt;
  &lt;li&gt;Allows applications that might normally conflict to run on the same instance of Windows by provide a layer of isolation between Windows and applications delivered with App-V&lt;/li&gt;
  &lt;li&gt;Helps to simplify gold images by enabling applications to be streamed to Windows desktops&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;App-V has 3 main components:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The App-V Sequencer - the Sequencer enables an IT professional to capture the installation of an application and turn that into an App-V package&lt;/li&gt;
  &lt;li&gt;The App-V Client - the Client enables App-V packages to be delivered to Windows desktops where the applications contained in those packages are executed, just like they would be if they were installed&lt;/li&gt;
  &lt;li&gt;The App-V Server - the Server is enables the delivery of App-V packages to Windows desktops where the App-V client is installed. The App-V Server consists of a number of components that allow for the publishing and authorizing of users or desktops to stream App-V packages. There are a number of ways to deploy App-V packages, so the App-V Server is an optional component of App-V&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Designing and implementing App-V requires understanding your application portfolio, your method of delivering Windows desktops to users and understanding how the different delivery mechanisms for App-V will fit within your environment.&lt;/p&gt;

&lt;h1 id=&quot;additional-resources&quot;&gt;Additional Resources&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.microsoft.com/en-us/windows/enterprise/products-and-technologies/mdop/app-v.aspx&quot;&gt;Microsoft Application Virtualization&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://technet.microsoft.com/en-us/windows/jj835807.aspx?ocid=wc-mscom-ent&quot;&gt;App-V 5.0 Overview&lt;/a&gt; video&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.microsoft.com/en-us/download/details.aspx?id=27760&quot;&gt;Microsoft Application Virtualization (App-V) Documentation Resources Download Page&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;previously&quot;&gt;Previously&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/virtualisation/app-v-faq-2-what-is-microsoft-application-virtualization&quot;&gt;App-V 4.x FAQ: What is Microsoft Application Virtualization?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-05-28-synergy-2015-replay.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-05-28-synergy-2015-replay</id><content type="html" xml:base="/2019/04/11/2015-05-28-synergy-2015-replay.html">&lt;p&gt;Citrix have made available the recording of &lt;a href=&quot;/citrix-synergy-2015/&quot;&gt;our session&lt;/a&gt; at Synergy 2015 in Orlando - &lt;a href=&quot;https://www.mycugc.org/p/do/sd/sid=25&quot;&gt;I’ve Got 99 Problems and Folder Redirection is Every One of Them&lt;/a&gt;. This is a standard 45-minute, level 400 session. &lt;a href=&quot;https://twitter.com/shawnbass&quot;&gt;Shawn&lt;/a&gt; and I will be repeating this as &lt;a href=&quot;http://briforum.com/US/sessions.html&quot;&gt;a 75-minute session at BriForum Denver&lt;/a&gt; with additional content and testing scenarios.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/05/IMG_2073.jpg&quot; alt=&quot;Synergy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;As a part of the Geek Speak Live track at Synergy 2015, this was the first time that these sessions have been recorded. Previous to this year, no recordings were made available.&lt;/p&gt;

&lt;p&gt;Going forward all of the Geek Speak sessions will be made available the new &lt;a href=&quot;https://www.mycugc.org/p/do/sd/sid=25&quot;&gt;Citrix User Group Community&lt;/a&gt; site, so if you didn’t get to Synergy or unable to attend one of the Geek Speak sessions while you where there, &lt;a href=&quot;https://www.mycugc.org/p/do/si/topic=18&quot;&gt;you can catch up with all of them&lt;/a&gt; over at the new community site.&lt;/p&gt;

&lt;p&gt;To watch these you’ll need to sign up for the CUGC site, so you can take full advantage of the additional great content there and contribute to the wider Citrix community.&lt;/p&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-05-15-replicate-2015-folder-redirection-test.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-05-15-replicate-2015-folder-redirection-test</id><content type="html" xml:base="/2019/04/11/2015-05-15-replicate-2015-folder-redirection-test.html">&lt;p&gt;&lt;a href=&quot;https://twitter.com/helgeklein&quot;&gt;Helge&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/shawnbass&quot;&gt;Shawn&lt;/a&gt; and myself had a great session this week at Citrix Synergy with our session &lt;a href=&quot;https://citrix.g2planet.com/synergyorlando2015/public_session_view.php?agenda_session_id=185&quot;&gt;SYN502: I’ve got 99 problems, and folder redirection is every one of them&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;.com/media/2015/05/IMG_2073.jpg&quot; alt=&quot;IMG_2073&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We covered quite a number of test scenarios, so in this article, I want to share the approaches that we used for our tests, so that you can replicate them in your own environments.&lt;/p&gt;

&lt;h2 id=&quot;test-environment&quot;&gt;Test Environment&lt;/h2&gt;

&lt;p&gt;In my lab, I’ve used Windows Server 2012 R2 Hyper-V; however the hypervisor isn’t really that important, as long as you’re performing all of your tests on the same hypervisor.&lt;/p&gt;

&lt;p&gt;The virtual machine configuration used for the file server VMs, were configured with 2 vCPUs and 4 GB of RAM. I typically use Dynamic Memory on Hyper-V; however for these tests a fixed RAM sizing was used to ensure that as RAM demand in the VM changed, that performance metrics are not adversely affected.&lt;/p&gt;

&lt;p&gt;Client virtual machines were also configured with 2 vCPUs but with Dynamic Memory.&lt;/p&gt;

&lt;p&gt;This year, we have concentrated on testing SMB 3.02 as the primary version of SMB. We have used Windows 8.1 on the client side and Windows Server 2012 R2 and Windows Server 2008 R2 on the server side - so because Windows 8.1 and Windows Server 2012 R2 are SMB 3.02 aware, they will negotiate that version. When Windows 8.1 opens a connection to Windows Server 2008 R2, an SMB 2.1 connection is made.&lt;/p&gt;

&lt;p&gt;All virtual machines were deployed with the latest updates as at May 2015.&lt;/p&gt;

&lt;h2 id=&quot;throughput-tests-with-diskspd&quot;&gt;Throughput Tests with DiskSpd&lt;/h2&gt;

&lt;p&gt;To test the throughput capabilities of SMB 3.02 and SMB 2.1, I’ve used the &lt;a href=&quot;http://aka.ms/DiskSpd&quot;&gt;DiskSpd 2.0.15 utility available from Microsoft&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;DiskSpd is a storage load generator / performance test tool from the Windows/Windows Server and Cloud Server Infrastructure Engineering teams.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You can liken DiskSpd to &lt;a href=&quot;http://www.iometer.org&quot;&gt;Iometer&lt;/a&gt;; like Iometer, I can use DiskSpad to test various IO workload simulations by selecting block sizes and read/write  however with DiskSpd I can specify a file path as the test target, including UNC paths.&lt;/p&gt;

&lt;p&gt;Rather than cover complete details in this post on how DiskSpd works, I instead recommend reading this post by Jose Barreto: &lt;a href=&quot;http://blogs.technet.com/b/josebda/archive/2014/10/13/diskspd-powershell-and-storage-performance-measuring-iops-throughput-and-latency-for-both-local-disks-and-smb-file-shares.aspx&quot;&gt;DiskSpd, PowerShell and storage performance: measuring IOPs, throughput and latency for both local disks and SMB file shares&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;One very useful part from that article that I will replicate here is the parameters table for DiskSpd. With this table, I was able to create the specific tests that were useful for me to determine the throughput performance for both SMB 2.1 and SMB 3.02.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Parameter&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
      &lt;th&gt;Notes&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;-c&lt;/td&gt;
      &lt;td&gt;Size of file used.&lt;/td&gt;
      &lt;td&gt;Specify the number of bytes or use suffixes like K, M or G (KB, MB, or GB). You should use a large size (all of the disk) for HDDs, since small files will show unrealistically high performance (short stroking).&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-d&lt;/td&gt;
      &lt;td&gt;The duration of the test, in seconds.&lt;/td&gt;
      &lt;td&gt;You can use 10 seconds for a quick test. For any serious work, use at least 60 seconds.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-w&lt;/td&gt;
      &lt;td&gt;Percentage of writes.&lt;/td&gt;
      &lt;td&gt;0 means all reads, 100 means all writes, 30 means 30% writes and 70% reads. Be careful with using writes on SSDs for a long time, since they can wear out the drive. The default is 0.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-r&lt;/td&gt;
      &lt;td&gt;Random&lt;/td&gt;
      &lt;td&gt;Random is common for OLTP workloads. Sequential (when r is not specified) is common for Reporting, Data Warehousing.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-b&lt;/td&gt;
      &lt;td&gt;Size of the IO in KB&lt;/td&gt;
      &lt;td&gt;Specify the number of bytes or use suffixes like K, M or G (KB, MB, or GB). 8K is the typical IO for OLTP workloads. 512K is common for Reporting, Data Warehousing.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-t&lt;/td&gt;
      &lt;td&gt;Threads per file&lt;/td&gt;
      &lt;td&gt;For large IOs, just a couple is enough. Sometimes just one. For small IOs, you could need as many as the number of CPU cores.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-o&lt;/td&gt;
      &lt;td&gt;Outstanding IOs or queue depth (per thread)&lt;/td&gt;
      &lt;td&gt;In RAID, SAN or Storage Spaces setups, a single disk can be made up of multiple physical disks. You can start with twice the number of physical disks used by the volume where the file sits. Using a higher number will increase your latency, but can get you more IOPs and throughput.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-L&lt;/td&gt;
      &lt;td&gt;Capture latency information&lt;/td&gt;
      &lt;td&gt;Always important to know the average time to complete an IO, end-to-end.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-h&lt;/td&gt;
      &lt;td&gt;Disable hardware and software caching&lt;/td&gt;
      &lt;td&gt;No hardware or software buffering. Buffering plus a small file size will give you performance of the memory, not the disk.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;For the DiskSpd tests that I ran in my environment, I ran DiskSpd against a 256Mb file for 120 seconds with various block sizes with separate tests for read and write (i.e. I ran 100% read or 100% write). Here’s two sample commands for running 4K block sizes and using read or write tests:&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;diskspd.exe -c256M -d120 -si -w0 -t2 -o8 -b4K -h -L \\mb-win81\diskspd\testfile.dat
diskspd.exe -c256M -d120 -si -w100 -t2 -o8 -b4K -h -L \\mb-win81\diskspd\testfile.dat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Each of these tests uses 2 threads (1 per vCPU) and then from the output I’ve used the total MB/s seen from both threads as the result.&lt;/p&gt;

&lt;h2 id=&quot;file-server-capacity-tool&quot;&gt;File Server Capacity Tool&lt;/h2&gt;

&lt;p&gt;To appropriate some type of folder redirection tests, I used the File Server Capacity Tool - this was about the best tool that I could find that could simulate home folder access (if you know of another, please let me know).&lt;/p&gt;

&lt;p&gt;I won’t go into detail on how to use FSCT, instead I recommend reading this article by Mark Morowczynski - &lt;a href=&quot;http://blogs.technet.com/b/askpfeplat/archive/2014/04/28/how-to-use-the-file-server-capacity-tool-fsct-on-server-2012-r2.aspx&quot;&gt;How to use the File Server Capacity Tool (FSCT) on Server 2012 R2&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The File Server Capacity Tool binaries are available from the following links:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.microsoft.com/en-us/download/details.aspx?id=27284&quot;&gt;File Server Capacity Tool v1.2- (64 bit)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.microsoft.com/en-us/download/details.aspx?id=27283&quot;&gt;File Server Capacity Tool v1.2 - (32 bit)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In my lab environment, I’ve used two physical hosts with the file server targets on one host (to ensure no resource contention) and the controller and clients on a separate host. The two hosts are connected via a 1GB switch.&lt;/p&gt;

&lt;p&gt;Other than specific tests where we wanted to know the effect of anti-virus on the file server, no AV application was installed on any server or client (physical or virtual).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;.com/media/2015/05/FSCT.png&quot; alt=&quot;File Server Capacity Tool&quot; /&gt;&lt;em&gt;File Server Capacity Tool architecture&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;FSCT comes with a single work load - Home Folders. Which is fortunately great for our use, should be as similar as possible to real work use of users interacting with their Documents or Desktop folders that are redirected to their home drive.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/05/fsct-workload.png&quot; alt=&quot;File Server Capacity Tool - Home Folders Workload&quot; /&gt;&lt;em&gt;File Server Capacity Tool - Home Folders Workload&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;A single run of an FSCT workload simulation can take a very long time, so expect each simulation to run from 3 hours or more depending on the total number of user sessions that you want to get to. In each workload simulation, I ran from 50 to 800 user sessions, stepping by 50 user sessions for each test.&lt;/p&gt;

&lt;p&gt;Here’s what a workload simulation looks like:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/05/fsct.png&quot; alt=&quot;How File Server Capacity Tool workload simulations are run&quot; /&gt;&lt;em&gt;How File Server Capacity Tool workload simulations are run&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;To demonstrate an example, here’s an overview of the environment and the FSCT commands that I used to run the workloads for each test.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;File Server&lt;/strong&gt;: FILE3 (192.168.0.79, Windows Server 2012 R2)&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Controller&lt;/strong&gt;: CNTRLR (Windows 8.1)&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Clients&lt;/strong&gt;: CLIENT1, CLIENT2, CLIENT3, CLIENT4 (Windows 8.1; each client ran up to 200 concurrent sessions)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The basic steps for running FSCT were as follows:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Prepare the Domain Controller (create the user accounts used by FSCT)&lt;/li&gt;
  &lt;li&gt;Prepare File Server (create the file data used by the workload. This required ~65GB for 800 users and ~92GB by the time the tests completed. Create a dedicated partition or disk for hosting the data)&lt;/li&gt;
  &lt;li&gt;Prepare Controller&lt;/li&gt;
  &lt;li&gt;Prepare Client&lt;/li&gt;
  &lt;li&gt;Run Client&lt;/li&gt;
  &lt;li&gt;Run Controller&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;So the commands I used for my environment (run on the various VMs used in the test) were:&lt;/p&gt;

&lt;p&gt;Create 800 users accounts (200 user accounts per client, with 4 clients): &lt;code class=&quot;highlighter-rouge&quot;&gt;fsct prepare dc /users 200 /clients CLIENT1,CLIENT2,CLIENT3,CLIENT4 /password Passw0rd&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Prepare the file server - create user data on the E: partition, using the HomeFolders workload: &lt;code class=&quot;highlighter-rouge&quot;&gt;fsct prepare server /clients CLIENT1,CLIENT2,CLIENT3,CLIENT4 /password Passw0rd /users 200 /domain home.stealthpuppy.com /volumes E: /workload HomeFolders&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Prepare the Controller: &lt;code class=&quot;highlighter-rouge&quot;&gt;fsct prepare controller&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Prepare the Client (run per client VM): &lt;code class=&quot;highlighter-rouge&quot;&gt;fsct prepare client /server fsctserver /password Passw0rd /users 200 /domain home.stealthpuppy.com /server_ip 192.168.0.79&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Run the workload on each client (run per client VM): &lt;code class=&quot;highlighter-rouge&quot;&gt;fsct run client /controller CNTRLR /server fsctserver /password Passw0rd /domain home.stealthpuppy.com&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Start the tests (run on the Controller VM): &lt;code class=&quot;highlighter-rouge&quot;&gt;fsct run controller /server FILE3 /password Passw0rd /volumes E: /clients CLIENT1,CLIENT2,CLIENT3,CLIENT4 /min_users 50 /max_users 800 /step 50 /duration 720 /workload HomeFolders&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Each command is run on the respective virtual machine - the FSCT binaries were run from C:\FSCT.&lt;/p&gt;

&lt;h2 id=&quot;uberagent-for-splunk&quot;&gt;uberAgent for Splunk&lt;/h2&gt;

&lt;p&gt;To make it simple to measure logon times, there’s only one tool worth using to view metrics and that’s of course &lt;a href=&quot;https://helgeklein.com/uberagent-for-splunk/&quot;&gt;uberAgent for Splunk&lt;/a&gt;. uberAgent makes it simple to report on logon times - so all you’ll need to do is setup roaming profiles, log onto a machine with the agent installed and view the Logon Duration report.&lt;/p&gt;

&lt;p&gt;I recommend creating a large enough profile, or one that is indicative of profiles that you may have in production. For real stress testing, the number of files in the profile is more important than the total profile size.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/05/uberAgent-logon-duration-dashboard.png&quot; alt=&quot;uberAgent logon duration dashboard&quot; /&gt;&lt;em&gt;Viewing logon times in uberAgent.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;If you want to use uberAgent in your lab, I recommend contacting &lt;a href=&quot;mailto:info@helgeklein.com&quot;&gt;info@helgeklein.com&lt;/a&gt; for info on whether you qualify for a consultants license.&lt;/p&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-05-08-citrix-synergy-2015.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-05-08-citrix-synergy-2015</id><content type="html" xml:base="/2019/04/11/2015-05-08-citrix-synergy-2015.html">&lt;p&gt;&lt;a href=&quot;http://www.citrixsynergy.com&quot;&gt;Citrix Synergy 2015&lt;/a&gt; is just next week, so for me that means several things - attending CTP meetings (from about 8:00 am to 9:00 pm each day) on the Sunday and Monday, presenting a Geek Speak Live session on Tuesday, helping to man the &lt;a href=&quot;http://www.atlantiscomputing.com&quot;&gt;Atlantis&lt;/a&gt; booth on the solutions expo floor, taking part in Geek Speak on Wednesday evening, meet old and new friends and generally have some fun.&lt;/p&gt;

&lt;p&gt;Here’s a just few things that I’m looking forward to getting involved in and seeing at Synergy this year.&lt;/p&gt;

&lt;h1 id=&quot;ive-got-99-problems-and-folder-redirection-is-every-one-of-them&quot;&gt;I’ve Got 99 Problems and Folder Redirection is Every One of Them&lt;/h1&gt;

&lt;p&gt;&lt;img class=&quot;alignnone size-full wp-image-3941&quot; src=&quot;/media/2015/05/GeakSpeakLive.jpg&quot; alt=&quot;GeakSpeakLive&quot; width=&quot;640&quot; height=&quot;83&quot; srcset=&quot;/media/2015/05/GeakSpeakLive.jpg 640w, /media/2015/05/GeakSpeakLive-150x19.jpg 150w, /media/2015/05/GeakSpeakLive-300x39.jpg 300w&quot; sizes=&quot;(max-width: 640px) 100vw, 640px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Along with &lt;a href=&quot;http://twitter.com/helgeklein&quot;&gt;Helge Klein&lt;/a&gt; and &lt;a href=&quot;http://twitter.com/shawnbass&quot;&gt;Shawn Bass&lt;/a&gt;, I’ll be presenting a Geek Speak Live session on folder redirection. We presented on the same topic at BriForum Boston and London last year, and this time at Synergy we’re taking another deep technical look at folder redirection.&lt;/p&gt;

&lt;p&gt;Folder redirection is a feature in Windows that practically all enterprises work with - it brings great benefit for providing users with a consistent view of their data, but it’s a technology that’s tightly intertwined with home drives, user profiles and Offline Files. There are many components of the user environment that interact and often each is not considered as a part of the whole - that is, how does one component impact on the other? So folder redirection is an important technology for us to cover.&lt;/p&gt;

&lt;p&gt;We’ll talk about the challenges of folder redirection, present the results of testing that we’ve been working on, provide some recommendations on working with folder redirection and a discussion on alternatives.&lt;/p&gt;

&lt;p&gt;We’ll be presenting next Tuesday the 14th (the first day of Synergy) at 2:30pm. &lt;a href=&quot;https://citrix.g2planet.com/synergyorlando2015/public_session_view.php?agenda_session_id=185&quot;&gt;SYN502: I’ve got 99 problems, and folder redirection is every one of them&lt;/a&gt;. Please join us, we’d love to see you there.&lt;/p&gt;

&lt;h1 id=&quot;geek-speak-tonight&quot;&gt;Geek Speak Tonight&lt;/h1&gt;

&lt;p&gt;&lt;img class=&quot; wp-image-3940 size-full alignnone&quot; src=&quot;/media/2015/05/GeakSpeak.jpg&quot; alt=&quot;GeakSpeak&quot; width=&quot;445&quot; height=&quot;83&quot; srcset=&quot;/media/2015/05/GeakSpeak.jpg 445w, /media/2015/05/GeakSpeak-150x28.jpg 150w, /media/2015/05/GeakSpeak-300x56.jpg 300w&quot; sizes=&quot;(max-width: 445px) 100vw, 445px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I’m really looking forward to Geek Speak Tonight this year - a core team of some of the CTPs have been working on what I am sure will be &lt;a href=&quot;https://citrix.g2planet.com/synergyorlando2015/public_session_view.php?agenda_session_id=157&quot;&gt;the best Synergy Geek Speak Tonight&lt;/a&gt; yet.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Geek Speak Live! continues its long tradition as one of the most popular and lively tracks at Citrix Synergy. It’s a unique platform for technology experts to show off their knowledge and for audience members to participate in friendly but frank debates on a variety of technical issues. At Synergy 2015, independent techies, industry analysts and bloggers will facilitate discussions in an atmosphere that encourages plenty of give and take.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This year the theme is IoT including lively discussions and demos. There’ll be beer and food, most surely some swearing and definitely some laughs. Be sure to be there as this type of session is really about the audience as much as it is the presenters.&lt;/p&gt;

&lt;h1 id=&quot;geekovation&quot;&gt;GeekOvation&lt;/h1&gt;

&lt;p&gt;There’s a very special part of Geek Speak Tonight this year - &lt;a href=&quot;http://blogs.citrix.com/2015/04/16/geekovation-award-at-synergy-geek-speak-tonight/&quot;&gt;GeekOvation&lt;/a&gt;. This is your opportunity to show off your geek credentials. I’m looking forward to seeing these presentations and seeing special, real world examples of what people in the Citrix community are sinking their teeth into.&lt;/p&gt;

&lt;h1 id=&quot;user-group-initiatives&quot;&gt;User Group Initiatives&lt;/h1&gt;

&lt;p&gt;Some new initiatives around Citrix user groups looks to be one of those “worst keep secrets”, but I won’t share details, however this is something worth looking forward to and getting involved in. Full details will be announced by Citrix on Tuesday.&lt;/p&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-04-30-video-using-the-citrix-x1-prototype-mouse.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-04-30-video-using-the-citrix-x1-prototype-mouse</id><content type="html" xml:base="/2019/04/11/2015-04-30-video-using-the-citrix-x1-prototype-mouse.html">&lt;p&gt;I received a &lt;a href=&quot;http://www.citrix.com/go/citrix-mouse.html&quot;&gt;Citrix X1 Prototype&lt;/a&gt; mouse a few days ago, so I’ve put together here a short video that shows paring the mouse and using it in a remote Windows 8 desktop.&lt;/p&gt;

&lt;p&gt;The X1 mouse is basically a bluetooth mouse (it should pair with any Bluetooth enabled PC or Mac) that you pair with an iPad - the magic comes with teaming the mouse with &lt;a href=&quot;https://itunes.apple.com/au/app/r1/id491797345?mt=8&quot;&gt;Citrix Receiver R1&lt;/a&gt; (presumably Receiver X1, by the time we get to Citrix Synergy in a couple of weeks). Once paired you’ll see a mouse cursor in Receiver that works in the remote desktop.&lt;/p&gt;

&lt;p&gt;I’m testing this out with an iPad 4th generation and a &lt;a href=&quot;http://www.logitech.com/en-au/product/ultrathin-keyboard-cover&quot;&gt;Logitech Ultrathin Bluetooth keyboard&lt;/a&gt; making this a complete thin-client solution (and more) for access to a virtual desktop. The only thing I’m missing is a &lt;a href=&quot;http://store.apple.com/au/product/MD826AM/A/lightning-digital-av-adapter&quot;&gt;connection to an external monitor&lt;/a&gt;, which might make this the ultimate thin-client setup (I can use AirPlay but that just mirrors the iPad screen).&lt;/p&gt;

&lt;p&gt;So far I’m impressed with the setup and the experience is provided with the iPad. I did need to configure the mouse pointer speed to my liking in the remote desktop, so I’m hoping that Citrix can provide some additional options within Receiver for controlling mouse pointer options in the future.&lt;/p&gt;

&lt;p&gt;Here’s a 2 minute video that shows pairing the mouse and using it a remote Windows 8 desktop:&lt;/p&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-04-07-folder-redirection-offline-files-appsense-datanow-35.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-04-07-folder-redirection-offline-files-appsense-datanow-35</id><content type="html" xml:base="/2019/04/11/2015-04-07-folder-redirection-offline-files-appsense-datanow-35.html">&lt;p&gt;I’ve previously covered the use of &lt;a href=&quot;/replacing-redirected-folders-and-offline-files-with-appsense-datanow/&quot;&gt;AppSense DataNow as an alternative to folder redirection and Offline Files&lt;/a&gt;. In that article I provided an approach to using DataNow to sync a copy of the user’s home drive locally instead of redirecting user folders to the network. I’ve previously used a beta version of DataNow and with the release of DataNow 3.5, I want to take an updated look at this solution.&lt;/p&gt;

&lt;h1 id=&quot;redirected-folders-and-offline-files&quot;&gt;Redirected Folders and Offline Files&lt;/h1&gt;

&lt;p&gt;Redirected Folders remain the de-facto standard for making user data available across corporate PCs running Windows. Redirected Folders provide users with a consistent view of their data across devices or desktops, while Offline Files synchronises that data locally making it available when disconnected from the network. All of this works over standard SMB connections, which aren’t ideal for today’s mobile workers who are often connected to the Internet, rather than the corporate network. VPN connections and &lt;a href=&quot;https://technet.microsoft.com/en-au/network/dn791020&quot;&gt;DirectAccess&lt;/a&gt; provide access to internal file shares, but the data still remains tied to domain-joined Windows PCs.&lt;/p&gt;

&lt;p&gt;With the &lt;a href=&quot;https://helgeklein.com/blog/2014/10/folder-redirection-impacts-ux-breaks-applications&quot;&gt;performance&lt;/a&gt; and &lt;a href=&quot;/configuring-an-automatic-resolution-policy-for-offline-files-in-windows-7/&quot;&gt;synchronisation issues&lt;/a&gt; that you may experience, it’s far from a perfect solution but it’s built into Windows and therefore best approach that most environments have had for many years. While file synchronisation solutions are becoming prevalent, these features will be around for a long time to come.&lt;/p&gt;

&lt;p&gt;There are various 3&lt;sup&gt;rd&lt;/sup&gt; party file sync solutions aimed at providing access to on-premises data – &lt;a href=&quot;http://www.citrix.com/products/sharefile/overview.html&quot;&gt;Citrix ShareFile&lt;/a&gt; (including &lt;a href=&quot;http://support.citrix.com/proddocs/topic/sharefile-storagezones-30/sf-deploy.html&quot;&gt;StorageZone connectors&lt;/a&gt; for on-premises home drives), &lt;a href=&quot;http://home.oxygencloud.com/features/&quot;&gt;Oxygen Open Storage Grid&lt;/a&gt;, and AppSense DataNow to name a few.&lt;/p&gt;

&lt;p&gt;There’s even Microsoft’s Work Folders in Windows Server 2012 R2, but I fear that until Microsoft delivers mobile clients for all major mobile operating systems (including their own) and newer features in a timely manner, that Work Folders is dead in the water.&lt;/p&gt;

&lt;p&gt;Let’s take another look at the integration between AppSense DataNow and the traditional method of providing users with access to their data.&lt;/p&gt;

&lt;h1 id=&quot;what-is-appsense-datanow&quot;&gt;What is AppSense DataNow?&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;http://www.appsense.com/products/data/datanow&quot;&gt;DataNow&lt;/a&gt;&lt;a href=&quot;http://www.appsense.com/products/desktop/desktopnow-plus&quot;&gt;&amp;lt;img class=”alignleft wp-image-3879 size-full” src=”.com/media/2015/04/logo_lg_dn.png” alt=”logo_lg_dn&lt;/a&gt; and it provides an easy way to access to corporate data (stored on user home drives) from mobile devices, Windows PCs and Macs. Since I last looked at this product, AppSense has released version 3.5 and also provided the ability to provide users with access to any SMB location on your internal network.&lt;/p&gt;

&lt;p&gt;DataNow is a completely on-premises solution - there’s no public cloud-based component, instead you host the control plane and connect it to your existing data. Access is proxied through a virtual appliance, which you would locate in a DMZ or on the internal network depending on your environment, while the file data remains in its existing location (i.e. file servers inside the trusted network). The DataNow client (for Windows, Mac, iOS and Android) then accesses that data over HTTPS. This allows you to provide access to user data from any location.&lt;/p&gt;

&lt;p&gt;With this overview in mind, I should be able to use DataNow to synchronise data to physical PCs, instead of using Offline Files. I could then continue to use standard folder redirection for hosted desktops in the data centre (i.e. those desktops right next to the file storage).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2012/08/diagram.png&quot; alt=&quot;DataNow diagram&quot; /&gt;&lt;em&gt;A simplified view of the AppSense DataNow architecture&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The idea being that this approach should provide users with a consistent view of their data regardless of how they are accessing a corporate desktop, without having to redirect user folders to the network and then dealing with the challenges that comes with it. I can also allow users to access their home drives from any device that makes sense for their uses, including mobile devices.&lt;/p&gt;

&lt;h1 id=&quot;approaches-to-integrating-user-folders-with-datanow&quot;&gt;Approaches to Integrating User Folders with DataNow&lt;/h1&gt;

&lt;p&gt;When installing the DataNow client, the user’s data is synchronised locally to a DataNow folder – similar in approach to Dropbox or OneDrive. Here’s three ways that I could aggregate my local folders (Documents, Desktop etc.) with the DataNow folder:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Leverage Windows 7 Libraries – include folders below the DataNow folder in the Documents, Music, Pictures and Videos Libraries. This will work, there’s even methods of &lt;a href=&quot;http://windowslibrariespsh.codeplex.com/&quot;&gt;scripting changes to the Libraries&lt;/a&gt;, but we miss out on important folders such as Favorites and the Desktop&lt;/li&gt;
  &lt;li&gt;Create Junction Points – create junction points for each of the user folders to folders in the DataNow folder. This will cover all user folders, but junction points aren’t a very elegant solution&lt;/li&gt;
  &lt;li&gt;Use Folder Redirection delivered by AppSense Environment Manager (EM) – redirect each of the user folders into the DataNow folder&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The first two approaches are far from ideal whilst using Folder Redirection with EM holds the most promise, as Folder Redirection is arguably the easiest to implement and undo. At a high level, here’s how this would work:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The DataNow client creates a local folder for storing data - C:\Users\Aaron\DataNow&lt;/li&gt;
  &lt;li&gt;User folders are redirected to this location, for example, C:\Users\Aaron\Documents is redirected to C:\Users\Aaron\DataNow\Home\Documents. While I’m still using folder redirection, this keeps the user folder local and avoids the latency in redirecting to the network&lt;/li&gt;
  &lt;li&gt;The DataNow client keeps the local Documents folder (C:\Users\Aaron\DataNow\Home\Documents) in sync with my home drive (e.g. H:\Documents) and provide offline access with the ability to sync across the Internet&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;appliance-configuration&quot;&gt;Appliance Configuration&lt;/h1&gt;

&lt;p&gt;In the previous version of this article, I didn’t cover setting up DataNow, so here’s the steps I’ve gone through to setup DataNow in my lab.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://www.myappsense.com/datanow/v3.5/admin/Admin/The_DataNow_Appliance.htm&quot;&gt;DataNow appliance&lt;/a&gt; is available for vSphere, XenServer and Hyper-V - it’s a hardened Linux-based VM that can be &lt;a href=&quot;https://www.myappsense.com/datanow/v3.5/admin/Admin/Clustering.htm&quot;&gt;clustered and load-balanced for high availability&lt;/a&gt;. For my lab environment, I’ve used the Hyper-V version, but the download and configuration is the same for all platforms.&lt;/p&gt;

&lt;p&gt;![DataNowApplianceDownload” width=”667” height=”282” srcset=”.com/media/2015/04/DataNowApplianceDownload.png 667w, .com/media/2015/04/DataNowApplianceDownload-150x63.png 150w, .com/media/2015/04/DataNowApplianceDownload-300x127.png 300w” sizes=”(max-width: 667px) 100vw, 667px” /&amp;gt;&lt;em&gt;The DataNow appliance is available for the most popular virtualization platforms&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;After importing the VM and &lt;a href=&quot;https://www.myappsense.com/datanow/v3.5/admin/Admin/Installing_the_DataNow_Appliance.htm&quot;&gt;assigning an IP address via the console&lt;/a&gt;, the first step is to &lt;a href=&quot;https://www.myappsense.com/datanow/v3.5/admin/Admin/Configure_DNS_for_file_server_location.htm&quot;&gt;configure DNS and domain settings&lt;/a&gt;. Here I’ve configured the appliance to use my AD DNS server and internal domain name for name resolution.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/04/ConfigurationDNS.png&quot; alt=&quot;AppSense DataNow 3.5 appliance DNS configuration&quot; /&gt;&lt;em&gt;AppSense DataNow 3.5 appliance DNS configuration&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.myappsense.com/datanow/v3.5/admin/Admin/Configure_the_Active_Directory_connection.htm&quot;&gt;Connection to Active Directory&lt;/a&gt; in straight-forward, specify one or more AD controllers, an LDAP port and an account to connect to AD with. Don’t use the Administrator account like I have done here - this is only lab. Preferably create a dedicated service account for DataNow.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/04/ConfigurationAD.png&quot; alt=&quot;AppSense DataNow 3.5 appliance AD configuration&quot; /&gt;&lt;em&gt;AppSense DataNow 3.5 appliance AD configuration&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;To provide users with access to data, DataNow provides configuration for what are called &lt;a href=&quot;https://www.myappsense.com/datanow/v3.5/admin/Admin/Map_Point_Access.htm&quot;&gt;Map Points&lt;/a&gt; - essentially SMB or WebDav locations in the corporate network. The location of Home drives can be set via the user properties in Active Directory - so rather than explicitly setting the location, the DataNow appliance will read the homeDirectory attribute from the authenticated user account to find the user’s home directory.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/04/Config-MapPoints.png&quot; alt=&quot;AppSense DataNow 3.5 appliance Map Point configuration&quot; /&gt;&lt;em&gt;AppSense DataNow 3.5 appliance Map Point configuration&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;To provide access to user’s home drives, there’s not much else to configure. For my lab testing, I did allow access over HTTP so that I didn’t need to install a certificate. Additionally I’ve created a second Map Point to provide access to a specific share ( \HV1\ISOs in the screenshot above.)&lt;/p&gt;

&lt;p&gt;DataNow provides options for controlling &lt;a href=&quot;https://www.myappsense.com/datanow/v3.5/admin/Admin/Map_Point_Policy.htm&quot;&gt;authorization polices for Map Points&lt;/a&gt; using organisational units, user groups and user accounts. It’s also possible to control the types of devices that are allowed access including verified devices so that users don’t have unfettered access.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/04/Policy-MapPointAccess.png&quot; alt=&quot;AppSense DataNow 3.5 appliance Device policies&quot; /&gt;&lt;em&gt;AppSense DataNow 3.5 appliance Device policies&lt;/em&gt;&lt;/p&gt;

&lt;h1 id=&quot;implementation&quot;&gt;Implementation&lt;/h1&gt;

&lt;p&gt;To test access to home directories via DataNow, I’ve configured the following in a lab environment:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A home directory configured on the user account in Active Directory. I’ve started with a clean home directory&lt;/li&gt;
  &lt;li&gt;The AppSense DataNow appliance configuration described above&lt;/li&gt;
  &lt;li&gt;Two Windows 8.1 VMs – one with x86 Windows and the other with x64 Windows&lt;/li&gt;
  &lt;li&gt;Both VMs are running the AppSense Environment Manager 8.6 RC and DataNow 3.5 agents&lt;/li&gt;
  &lt;li&gt;The DataNow folder is stored at %USERPROFILE%\DataNow&lt;/li&gt;
  &lt;li&gt;An Environment Manager configuration that will redirect the user folders below the DataNow folder&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You may wonder why I haven’t used Group Policy to perform folder redirection – this is because Group Policy won’t allow you to redirect a user folder to a sub-folder of %USERPROFILE%. I guess Microsoft doesn’t want us creating a quantum singularity by redirecting %USERPROFILE%\Documents to %USERPROFILE%\Documents\Documents.&lt;/p&gt;

&lt;p&gt;If you’re using AppSense DataNow, I can assume there’s a good chance you’re also an AppSense Environment Manager shop. Once Environment Manager 8.6 is released, I’ll make the EM configuration that I used in this test available.&lt;/p&gt;

&lt;p&gt;The EM configuration, does a few things:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Enables Single Sign On for the DataNow client at the computer level on Startup and enables Single Sign On for the user at logon. Both of these actions use the native DataNow action built into EM 8.6. Single Sign On improves the user experience on domain joined PCs, by ensuring the user does not need to authenticate separately to DataNow&lt;/li&gt;
  &lt;li&gt;Sets the URL to the DataNow appliance&lt;/li&gt;
  &lt;li&gt;Redirects user folders to the DataNow folder. For this test, I redirected Desktop, Documents, Pictures, Videos, Music and Favorites.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;After logging onto the desktop and ensuring the the DataNow client has logged in and user folders are redirected successfully, I can access and sync my data across both devices while also accessing the same data on my iPhone or iPad. Here’s what this looks like on the desktop:&lt;/p&gt;

&lt;p&gt;![AppSenseDataNow35UXWindows8” width=”800” height=”700” /&amp;gt;&lt;em&gt;User experience on Windows 8 with user folders redirected to the DataNow folder&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;With an on-access policy set for the home directory Map Point, files are downloaded by the client when they’re accessed. Files that aren’t yet synchronised locally are denoted with an overlay:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/04/Documents-folder.png&quot; alt=&quot;AppSense DataNow Documents folder with files not yet synchronized.&quot; /&gt;&lt;em&gt;AppSense DataNow Documents folder with files not yet synchronized.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Synchronisation works between the local DataNow folder and the home drive and I’m able to make changes on each machine and see the changes on the other.&lt;/p&gt;

&lt;p&gt;Generally speaking though, this approach gives me what I’m after- synchronisation between the home drive and a Windows device that I can take offline, and even synchronise that data across the Internet as long as DataNow is available externally. The best part is that there is no Folder Redirection to the network (so no latency introduced by the network) and no Offline Files configured.&lt;/p&gt;

&lt;h1 id=&quot;mac-client-experience&quot;&gt;Mac Client Experience&lt;/h1&gt;

&lt;p&gt;To provide an idea of access to my home directory on an alternative platform, I’ve installed the DataNow client on my MacBook. I can synchronise and access my Active Directory home drive on a personal device as well.&lt;/p&gt;

&lt;p&gt;![DataNow-MacClient-Setup” width=”668” height=”598” /&amp;gt;&lt;em&gt;Setting up the DataNow client for OS X&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Once authenticated, my files are synchronised locally to a DataNow folder. Note in the screenshot below, the a cloud icon indicates that the files have not yet been copied locally, similar to the grey arrow overlay on Windows.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/2015/04/Mac-DataNow-Folder1.png&quot; alt=&quot;Accessing files locally on the Mac&quot; /&gt;&lt;em&gt;Accessing files locally on the Mac&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Once I access the file, the DataNow client will download it. The status of the DataNow client and settings are available from the OS X menu bar:&lt;/p&gt;

&lt;p&gt;![Viewing the DataNow client status on the Mac” width=”484” height=”540” srcset=”.com/media/2015/04/Mac-DataNow-status.png 484w, .com/media/2015/04/Mac-DataNow-status-134x150.png 134w, .com/media/2015/04/Mac-DataNow-status-269x300.png 269w” sizes=”(max-width: 484px) 100vw, 484px” /&amp;gt;&lt;em&gt;Viewing the DataNow client status on the Mac&lt;/em&gt;&lt;/p&gt;

&lt;h1 id=&quot;web-client-experience&quot;&gt;Web Client Experience&lt;/h1&gt;

&lt;p&gt;A file sync solution is not complete without access to data from a web browser. Here’s a view of access my home directory in a browser:&lt;/p&gt;

&lt;p&gt;![DataNowWebAccess” width=”959” height=”676” /&amp;gt;&lt;em&gt;DataNow web client&lt;/em&gt;&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;In this article, I’ve provided an alternative to redirecting user folders to a home drive (i.e. an SMB location) and synchronising that data locally using Offline Files. This approach uses a 3rd party solution to redirect the user folders to a local location that is then synchronised over HTTP, avoiding performance issues with redirecting to the network and allowing access to user data from any type of device.&lt;/p&gt;

&lt;p&gt;I’ve used AppSense products for this article, but I’m sure you can achieve the same solution with the user environment management and file sync products of your choice. In fact, I’d like to take a look at how I can do the same thing with Citrix ShareFile.&lt;/p&gt;

&lt;p&gt;I really like the approach that AppSense has taken with DataNow. While they face tough competition with the likes of ShareFile and Dropbox, the simplicity of DataNow is its greatest strength. I’m impressed how quickly I can get up and running with the appliance and connecting to my internal file share resources. For my interest in replacing Folder Redirection and Offline Files as an approach to providing access to home drives on physical PCs both in and out of the corporate network and providing access on non-Windows devices, the DataNow + Environment Manager solution works well.&lt;/p&gt;

&lt;p&gt;There are a couple items that I would like to see AppSense improve or implement in future versions of DataNow that would assist with this approach:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Provide conflict resolution policies - in the event of file versions conflicting, I would like to be able to specify which version of the file should take precedence, i.e. the local or server copy&lt;/li&gt;
  &lt;li&gt;Control the Sync Mode on a device basis to allow me to configure how specific types of devices sync data (on access on desktops; automatic on laptops)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: please don’t take this article as a recommendation from me for synchronising the &lt;em&gt;AppData\Roaming&lt;/em&gt; folder.&lt;/p&gt;</content><author><name></name></author></entry><entry><title type="html"></title><link href="/2019/04/11/2015-03-17-persistent-v-non-persistent.html" rel="alternate" type="text/html" title="" /><published>2019-04-11T20:40:55+10:00</published><updated>2019-04-11T20:40:55+10:00</updated><id>/2019/04/11/2015-03-17-persistent-v-non-persistent</id><content type="html" xml:base="/2019/04/11/2015-03-17-persistent-v-non-persistent.html">&lt;p&gt;A conversation about desktop virtualisation will invariably turn to the topic of persistent vs. non-persistent. Anyone new to VDI or Server Based Computing (SBC), may need persistent and non-persistent defined in context. This is a discussion that I have on a semi-regular basis, so for easy reference, I’d thought I would put down a discussion on this topic into an article.&lt;/p&gt;

&lt;p&gt;I’ll avoid talking about any one particular desktop virtualization solution and instead discuss this topic as it applies to all environments.&lt;/p&gt;

&lt;h2 id=&quot;persistency&quot;&gt;Persistency&lt;/h2&gt;

&lt;p&gt;I think it was &lt;a href=&quot;https://twitter.com/harrylabana&quot;&gt;Harry Labana&lt;/a&gt; that I originally heard this statement from - “Persistency is a measure of time”. This is absolutely true - what is the time between deploying and re-deploying that desktop? How long before that PC is rebuilt because of an unrecoverable error?&lt;/p&gt;

&lt;p&gt;If Windows is re-installed or the PC retired, the user must migrate to a new instance of Windows. If Windows is running on a persistent virtual machine, how long do you let that instance of Windows run before the size of the virtual hard disk becomes unmanageable? (&lt;a href=&quot;http://www.atlantiscomputing.com/&quot;&gt;Perhaps you need dedupe?&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;If we take persistency to mean a Windows install is immutable we live with a false sense of security. The same would apply to any general purpose OS - manage the data and configuration as though that install will fail tomorrow. If you can run all non-persistent desktops, you’re way ahead.&lt;/p&gt;

&lt;h2 id=&quot;defining-terms&quot;&gt;Defining Terms&lt;/h2&gt;

&lt;p&gt;Let me first list the various terms that you might hear when discussing this topic:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Persistent, stateful, full clone - a Windows instance is persistent because we want to protect that Windows install. Rebuilding it from scratch can take time and effort. A physical PC or server is persistent because there’s no abstraction of the OS from the hardware.&lt;/li&gt;
  &lt;li&gt;Non-persistent, stateless, pooled, shared, linked-clone - a non-persistent virtual desktop is often destroyed at user logoff, reboot or shutdown. A Remote Desktop Services (RDS) environment can also be considered non-persistent, even though the underlying Windows instance may be persistent.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So many words to describe essentially the same thing. For clarity’s sake, let’s stick with persistent and non-persistent for the rest of this article.&lt;/p&gt;

&lt;h2 id=&quot;who-are-we-talking-to&quot;&gt;Who Are We Talking To?&lt;/h2&gt;

&lt;p&gt;When discussing persistent and non-persistent, context is key - who’s perspective are we using - the administrator (admin, engineer, architecture etc.) or the user (end-user, IT Manager, CIO etc.)? These terms may have different meaning depending on the audience - non-persistent may sound scary to the uninitiated. Tell a user that their desktop is non-persistent and see what reaction you get.&lt;/p&gt;

&lt;p&gt;An administrator on the other hand, can choose either for his (or her) toolbox when delivering virtual desktops; however non-persistent may take a rethink when compared to traditional desktop management.&lt;/p&gt;

&lt;p&gt;Regardless of what type of desktop a user receives, the user requires persistency of their data - some things are non-negotiable.&lt;/p&gt;

&lt;p&gt;Ultimately we need to tailor the conversation to the audience and ensure we explain these concepts succinctly.&lt;/p&gt;

&lt;h2 id=&quot;whats-makes-the-modern-desktop&quot;&gt;What’s Makes the Modern Desktop?&lt;/h2&gt;

&lt;p&gt;Data aside, we first need to establish whether a user requires a persistent state across sessions, before deciding on a way to manage the desktops. To do that, we should consider each of the major components of the modern Windows desktop:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Application data - where does the application store data? If it’s a web-based application or stores data in a database, then it’s unlikely data also ends up on the user’s desktop&lt;/li&gt;
  &lt;li&gt;User data - ideally user data (e.g. documents) is not stored on the desktop or is at least synchronised to a remote location.&lt;/li&gt;
  &lt;li&gt;User preferences - do user preferences or their profiles need to persist across sessions? If you’re delivering just applications (and not desktops), do those applications have preferences that need to be saved? Could application settings be delivered as policies instead?&lt;/li&gt;
  &lt;li&gt;Applications - what is your application delivery strategy. VDI/RDS has been historically been hard to manage as a result of application requirements, making persistent desktops the easy route&lt;/li&gt;
  &lt;li&gt;User applications - do you need to provide an environment that users can install applications? Do you have developers or IT Pros in-house who often need administrative rights to get their jobs done&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;virtual-desktops&quot;&gt;Virtual Desktops&lt;/h2&gt;

&lt;p&gt;A user connects to an individual virtual machine running Windows (or perhaps soon this could be Linux). Virtual desktops usually run a desktop version of Windows, but this can also be Windows Server (Server VDI).&lt;/p&gt;

&lt;p&gt;A virtual desktop can be delivered from a persistent virtual machine and they will typically connect to that same virtual machine each session.&lt;/p&gt;

&lt;p&gt;Virtual desktops can also be provided from a pool of virtual machines that are might be deleted or refreshed within a short amount of time. If the user connects to a pool of desktops, they could connect to any desktop in that pool (i.e. random).&lt;/p&gt;

&lt;h2 id=&quot;remote-desktopservices&quot;&gt;Remote Desktop Services&lt;/h2&gt;

&lt;p&gt;Users connect to a shared Windows instance running Windows Server (individually known as a Remote Desktop Session Host).&lt;/p&gt;

&lt;p&gt;From the administrators point of view, Remote Desktop Session Hosts (RDSH) are managed as a persistent virtual machines (or as Windows directly on a physical host) but they could also be managed as non-persistent VMs.&lt;/p&gt;

&lt;p&gt;RDSH servers provide a pool (or farm) of Windows instances that users can receive their desktops or applications from - a user could connect to any server in the pool. As such, they represent a non-persistent desktop, regardless of whether the underlying RDSH server is persistent or non-persistent.&lt;/p&gt;

&lt;h2 id=&quot;considerations&quot;&gt;Considerations&lt;/h2&gt;

&lt;p&gt;With a persistent desktop, each time the user connects to that desktop, their applications, data and user profile / preferences will be intact. No other management is required (that doesn’t mean that management should be ignored though) and no change to process from physical desktop management is needed (other than the introduction of a hypervisor).&lt;/p&gt;

&lt;p&gt;On the other hand though, if you can ensure that even with non-persistent desktops, each time the user connects, their applications are installed, their data is abstracted from the desktop (using folder redirection or file sync solutions) and their profile (and application preferences) is available at logon, the illusion of a persistent environment will be presented.&lt;/p&gt;

&lt;p&gt;Delivering a persistent user environment on top of non-persistent desktops will take some effort can may require 3rd party tools to achieve the goal of running 100% non-persistent desktops.&lt;/p&gt;

&lt;p&gt;Here’s a short breakdown of the various differences between and considerations of persistent and non-persistent desktops:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Persistent&lt;/th&gt;
      &lt;th&gt;Non-Persistent&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Persistent from the user perspective may be different from the administrator perspective. IT staff may require a persistent desktop&lt;/td&gt;
      &lt;td&gt;A users can still receive a persistent environment from a non-persistent desktop&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;May be easier to manage because a persistent desktop is no different to a physical desktop&lt;/td&gt;
      &lt;td&gt;A change of management process which may primarily be managed by the VDI broker, but should enable faster updates of the gold image and ultimately a lower management cost&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Desktop management solutions such as System Center Configuration Manager would be required for most persistent desktops&lt;/td&gt;
      &lt;td&gt;System Center Configuration Manager can work with non-persistent desktops, but may not be required depending on how applications are delivered&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Backup may be required if users store data locally&lt;/td&gt;
      &lt;td&gt;All user must be redirected to a central file server, so backup is not required&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;If the user’s primary persistent desktop is unavailable, host and storage HA is required, otherwise the user could connect to a temporary non-persistent desktop&lt;/td&gt;
      &lt;td&gt;HA is provided with an N+1 architecture. If a desktop or host is unavailable, the user will reconnect and receive a new desktop&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Some form of shared storage is required to ensure the desktop is highly available&lt;/td&gt;
      &lt;td&gt;Local (physical or software defined) or shared storage can be used&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Folder redirection and user environment management may not be required but it is recommended to reduce the reliance on a specific virtual desktop&lt;/td&gt;
      &lt;td&gt;Folder redirection and user environment management is required. This will ensure user data (Documents, Desktop etc.) is accessible from different desktops and will provide the user with the look and feel of persistence&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;More storage is required for persistent desktops as the desktop can grow to consume the size of the vDisk&lt;/td&gt;
      &lt;td&gt;Non-persistent desktops can be destroyed and recreated as required, thus reducing the amount of capacity required&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Understanding the types of desktops available to you is only the first step in determining how your VDI environment will be delivered.&lt;/p&gt;</content><author><name></name></author></entry></feed>