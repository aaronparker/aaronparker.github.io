<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.0 -->
<title>Visualizing the Impact of Folder Redirection - Logon and Application Launch | stealthpuppy</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Visualizing the Impact of Folder Redirection - Logon and Application Launch" />
<meta name="author" content="Aaron Parker" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is the second in a series of articles on folder redirection by Aaron Parker, Helge Klein and Shawn Bass." />
<meta property="og:description" content="This is the second in a series of articles on folder redirection by Aaron Parker, Helge Klein and Shawn Bass." />
<link rel="canonical" href="/visualizing-impact-folder-redirection-logon/" />
<meta property="og:url" content="/visualizing-impact-folder-redirection-logon/" />
<meta property="og:site_name" content="stealthpuppy" />
<meta property="og:image" content="/media/2014/11/demos-624x338.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-11-06T18:20:20+11:00" />
<script type="application/ld+json">
{"description":"This is the second in a series of articles on folder redirection by Aaron Parker, Helge Klein and Shawn Bass.","author":{"@type":"Person","name":"Aaron Parker"},"@type":"BlogPosting","url":"/visualizing-impact-folder-redirection-logon/","image":"/media/2014/11/demos-624x338.png","headline":"Visualizing the Impact of Folder Redirection - Logon and Application Launch","dateModified":"2014-11-06T18:20:20+11:00","datePublished":"2014-11-06T18:20:20+11:00","mainEntityOfPage":{"@type":"WebPage","@id":"/visualizing-impact-folder-redirection-logon/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="stealthpuppy" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">stealthpuppy</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about.html">ABOUT</a><a class="page-link" href="/smb-not-cifs.html">SMB not CIFS</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Visualizing the Impact of Folder Redirection - Logon and Application Launch</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2014-11-06T18:20:20+11:00" itemprop="datePublished">Nov 6, 2014
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Aaron Parker</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><em>This is the second in a series of articles on folder redirection by Aaron Parker, <a href="https://helgeklein.com/">Helge Klein</a> and <a href="http://shawnbass.com/" target="_blank">Shawn Bass</a>.</em></p>

<ul>
  <li>Part one: <a href="https://helgeklein.com/blog/2014/10/folder-redirection-impacts-ux-breaks-applications">How Folder Redirection Impacts UX &amp; Breaks Applications</a></li>
  <li>Part two: this article</li>
  <li>Part three: <a href="https://helgeklein.com/blog/2014/11/visualizing-impact-folder-redirection-start-menu-search/">Visualizing the Impact of Folder Redirection – Start Menu Search</a></li>
  <li>Part four: <a href="/measure-impact-folder-redirection/">Measuring the Impact of Folder Redirection – User Logon</a></li>
  <li>Part five: <a href="https://helgeklein.com/blog/2014/12/measuring-impact-folder-redirection-application-launch-smb-version/">Measuring the Impact of Folder Redirection – Application Launch &amp; SMB Version</a></li>
</ul>

<h1 id="vizualizing-impact-on-user-experience">Vizualizing Impact on User Experience</h1>

<p>In the previous article, <a href="https://helgeklein.com/blog/2014/10/folder-redirection-impacts-ux-breaks-applications">Helge covered the under the hood details of folder redirection</a>. Now let’s look at some possible scenarios that show the impact on the user experience with folder redirection enabled. In this article we’ll focus on the initial logon and application launch.</p>

<h1 id="test-environments">Test Environments</h1>

<p>We performed several tests across three different environments on three continents. Nothing if not diverse. While we don’t have enterprise level hardware to test on in our own labs (well, maybe Shawn does), this has enabled us to ensure that we can replicate the results in different environments.</p>

<p>For the purposes of this initial round of tests, we’ve stuck with Windows 7 and Windows Server 2008 R2, which at the time of writing, are the most common versions of Windows in enterprise environments. This means that all testing was completed with SMB 2.1.</p>

<p>What we’ve attempted to show is the impact on user experience when based on common user profile sizes, profile configuration options (e.g. roaming profiles and 3rd party solutions) and redirecting different sets of folders.</p>

<p>Each test environment is simulating or utilising RDS or VDI solutions to demonstrate the scenarios. This means that the desktop is close to the file server that is hosting the user’s profile, home drive or locations for folder redirection. In this initial round of testing, we haven’t focussed on physical desktops or desktop separated from file servers by a WAN connection.</p>

<h1 id="demos">Demos</h1>

<p>I’ve embedded a number of videos below that demonstrate the user experience for logon an application launch under different profile and folder redirection configurations and transient conditions.</p>

<h2 id="baseline">Baseline</h2>

<p>To demonstrate a baseline, this first video shows what a normal logon looks like. In this specific video, the user account is configured with a roaming profile (2,334 files, 33.7 MB total in size) but no folder redirection. Additionally the file server (hosting the user profile) is idle.</p>

<p>As you can see, logon is quick and once logon is complete the system is quite responsive. The general user experience is exactly what a user would expect from a well performing system.</p>

<h2 id="file-server-under-99-load">File Server Under 99% Load</h2>

<p>Now, let’s make no changes to the user account configuration (using the same profile), but put the file server under load by stressing the CPU. CPU load on the file server can be a common occurrence for various reasons - AV scans, run away processes, servicing a large number of SMB requests, or perhaps even CPU resources are limited due to contention on shared platforms (i.e. a hypervisor).</p>

<p>As you can see in the video above, the logon process is extended from seconds to over 3 minutes! With the file server under CPU load, it doesn’t have the capacity to service requests to transfer the profile down to the client in a timely manner.</p>

<p>With a profile that has thousands of files in it, each file transfer requires an open file/transfer data/close file sequence, so a lot of file requests can take a long time to service. Imagine the knock on effects of a file server under load with multiple concurrent logons.</p>

<h2 id="folder-redirection-enabled-with-file-server-under-99-load">Folder Redirection Enabled with File Server Under 99% Load</h2>

<p>In the next test, we still have a roaming profile; however now we’ve enabled folder redirection for all of the most common folders, including AppData, Desktop, Favourites and Documents etc. This reduces the data that needs to be copied in at logon, so we should expect logon to be quick, but what happens after logon?</p>

<p>Even with the file server under load, the logon is fast as we aren’t dragging data across the network; however you’ll notice a few things post-logon:</p>

<ul>
  <li>It takes time for the shortcuts on the desktop to display the icon associated with the shortcut (even though each shortcut is to the same application).</li>
  <li>The Libraries in Explorer take a long time to show child folders.</li>
  <li>Launching Adobe Reader takes an long time as the application requests files from AppData which is now on a network location.</li>
  <li>Internet Explorer 11 launch is reasonable, but longer than with previous tests.</li>
  <li>Microsoft Word takes a long tome to launch as it too is requesting files from AppData as we can see from the splash screen.</li>
</ul>

<p>In this scenario, we’ve traded slower performance over the session for improved logon speed. Where as logon is (usually) a one time action, application launch and operation delays will have a cumulative effect over the working session. Depending on the user’s activity, this could add up to more time than was saved during logon.</p>

<h2 id="citrix-profile-management-with-folder-redirection-not-enabled">Citrix Profile Management with Folder Redirection Not Enabled</h2>

<p>The next test actually reverses the scenario bit - we again have no folder redirection, but have augmented or replaced the roaming profile with a profile managed by Citrix Profile Management.</p>

<p>This approach uses streaming to bring the profile down to the desktop as data is requested. Data transfer is extended over the length of the session, rather than copied down before the logon process is complete.</p>

<p>This test demonstrates the streaming approach to profiles that Citrix Profile Management uses - files are copied down in the background as they are requested. The effect is that some actions are slower, so logon is slower than with folder redirection, but as the profile is fleshed out locally, application launches are then what you would expect from roaming profiles (or even a local profile). No additional requests to the network are required, so file access is from the local disk.</p>

<h1 id="conclusion">Conclusion</h1>

<p>Logon times receive top billing as time wasters for users, so we focus on getting logon times as low as possible.</p>

<figure id="attachment_3747" aria-describedby="caption-attachment-3747" style="width: 500px" class="wp-caption alignnone">[<img class="wp-image-3747 size-full" src="https://stealthpuppy.com/media/2014/11/wrap.gif" alt="wrap" width="500" height="230" />](/media/2014/11/wrap.gif)<figcaption id="caption-attachment-3747" class="wp-caption-text">Don't keep users waiting...*&lt;/figure&gt;

There's nothing wrong with reducing logon times, it's a noble pursuit, but the simplest and easiest method of doing so is to implement folder redirection. It gets data out of the profile, is built into Windows and is therefore a quick win. Everyone does it, so it must be good, right?

We've shown that it's very easy to impact logon and application launch times with and without folder redirection, just by placing the file server under load. When a Windows desktop is integrated into an enterprise environment with roaming profiles, folder redirection, home drives and perhaps even Exchange mailboxes, performance of the desktop is dictated not just by the PC alone, but also the available resources of other components in a distributed network.

File server resource configuration must align with desktop requirements, but profiles and home directories grow organically, so sizing can be challenging. Monitoring and proactive management of file servers is essential.

# Part Three

In the next article, Helge will cover the Windows Search and Start menu experience.
</figcaption></figure>

  </div><a class="u-url" href="/visualizing-impact-folder-redirection-logon/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">stealthpuppy</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">stealthpuppy</li><li><a class="u-email" href="mailto:aaron@stealthpuppy.com">aaron@stealthpuppy.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/aaronparker"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">aaronparker</span></a></li><li><a href="https://www.twitter.com/stealthpuppy"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">stealthpuppy</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>on end user computing and enterprise mobility</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
